FROM jwilder/nginx-proxy:alpine

# add proxy-wide config files
COPY conf.d/* /etc/ngnix/conf.d/
VOLUME /etc/nginx/conf.d

# add vhost-specific config (file name must equal server_name host name)
# if no vhost-specific file is found, the file name "default" file is included
COPY vhost.d/* /etc/nginx/vhost.d/
VOLUME /etc/nginx/vhost.d

# enable use of additional hosts not generated by nginx-proxy (adding the 
# include directive at the end enables extra hosts to re-use definitions)
RUN echo "include /etc/nginx/sites-enabled/*;" >> /app/nginx.tmpl
COPY sites-enabled/* /etc/nginx/sites-enabled/
VOLUME /etc/nginx/sites-enabled

#EOF
